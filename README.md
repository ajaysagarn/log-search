# Homework 3

### Ajay Sagar Nandimandalam
### UIN: 659867916

### The goal of this project is to gain experience with solving a distributed computational problem using cloud computing technologies by designing and implementing a RESTful service and a lambda function that are accessed from clients using gRPC.

## Running this project

This project consists of multiple sub modules that make up the overall root module. There are 3 modules namely
1. GrpcRestLambda : A scala project that implements a lambda function which can handle requests in both GRPC as well as REST style.
2. GrpcProto: A scala module that consists of the protobuf file. Compiling this project generated the required classes from the protobuf.
3. AkkaService: An Akka service that implements two REST API calls that functions as a wrapper on the client side to redirects any requests to the AWS API gateway.

Below are the steps that need to be followed in order to run the project
1. Open the command prompt/terminal at the root directory of the project and run the command ``sbt clean compile``.
This will compile all the modules in the project
2. If you need to compile a specific module run ``sbt <Module-name>/compile``
3. In order to create a fat jar of the GrpcRestLambda module inorder to be able to deploy the module, execute ``sbt GrpcRestLambds/assembly``
4. To run the Akka service in localhost, execute ``sbt AkkaService/run``

#### Deploying GrpcRestLambda module to Aws Lambda

1. Copy the fat jar generated by executing ``sbt GrpcLambda/assembly`` into an s3 bucket.
2. Create a lambda function by selecting Java 8 as the runtime language.
3. Once the Lambda function is created, within the code tab select upload -> from Amazon s3 -> In the dialog window paste the s3 link to the jar file and submit.
4. Under Runtime setting make sure to specify the pacakge and the class that contains the handle request function that needs to be invoked by Lambda.
5. Make sure to create appropriate IAM roles to allow lambda access rights to the s3 buckets.

#### Creating AWS API Gateway for the Lambda function

1. From the AWS console, navigate into the API Gateway service.
2. Click on Create API -> Rest API 
3. Provide a name for the API and click on create
4. Once create a directive and add a POST method to the api.
5. Under the POST-setup select integration type to be Lambda Function, check 'Use Lambda Proxy integration'.
6. Enter the URN of the lambda function in the field and click on create.
7. Next under action click on Deploy API to deploy the api publically

Once the above steps are complete. A unique api url will be provide using which post calls can be made to the lambda function via the API gateway.

[Implementation Details](./docs/implementation.md)


[Video Presentation](https://youtu.be/2vOmU7JYp24)

